/*! Copyright 2011 Trigger Corp. All rights reserved. */
(function(){var n={};n.config={modules:{logging:{level:"DEBUG"}}};var o={};o.listeners={};var q={};var i=[];var h=null;var a=false;var s=function(){if(i.length>0){if(!o.debug||window.catalystConnected){a=true;while(i.length>0){var t=i.shift();if(t[0]=="logging.log"){console.log(t[1].message)}o.priv.call.apply(o.priv,t)}a=false}else{h=setTimeout(s,500)}}};o.priv={call:function(B,A,z,u){if((!o.debug||window.catalystConnected||B==="internal.showDebugWarning")&&(i.length==0||a)){var t=n.tools.UUID();var w=true;if(B==="button.onClicked.addListener"||B==="message.toFocussed"){w=false}if(z||u){q[t]={success:z,error:u,onetime:w}}var v={callid:t,method:B,params:A};o.priv.send(v);if(window._forgeDebug){try{v.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiRequest(v)}catch(y){}}}else{i.push(arguments);if(!h){h=setTimeout(s,500)}}},send:function(t){throw new Error("Forge error: missing bridge to privileged code")},receive:function(t){if(t.callid){if(typeof q[t.callid]===undefined){n.log("Nothing stored for call ID: "+t.callid)}var v=q[t.callid];var u=(typeof t.content==="undefined"?null:t.content);if(v&&v[t.status]){v[t.status](t.content)}if(v&&v.onetime){delete q[t.callid]}if(window._forgeDebug){try{t.end=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiResponse(t)}catch(w){}}}else{if(t.event){if(o.listeners[t.event]){o.listeners[t.event].forEach(function(y){if(t.params){y(t.params)}else{y()}})}if(window._forgeDebug){try{t.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiEvent(t)}catch(w){}}}}}};o.addEventListener=function(t,u){if(o.listeners[t]){o.listeners[t].push(u)}else{o.listeners[t]=[u]}};o.generateQueryString=function(u){if(!u){return""}if(!(u instanceof Object)){return new String(u).toString()}var v=[];var t=function(z,y){if(z instanceof Array){var w=(y?y:"")+"[]";for(x in z){t(z[x],w)}}else{if(z instanceof Object){for(x in z){var w=x;if(y){w=y+"["+x+"]"}t(z[x],w)}}else{v.push(encodeURIComponent(y)+"="+encodeURIComponent(z))}}};t(u);return v.join("&").replace("%20","+")};o.generateMultipartString=function(t,v){if(typeof t==="string"){return""}var u="";for(key in t){u+="--"+v+"\r\n";u+='Content-Disposition: form-data; name="'+key.replace('"','\\"')+'"\r\n\r\n';u+=t[key].toString()+"\r\n"}return u},o.generateURI=function(u,t){var v="";if(u.indexOf("?")!==-1){v+=u.split("?")[1]+"&";u=u.split("?")[0]}v+=this.generateQueryString(t)+"&";v=v.substring(0,v.length-1);return u+(v?"?"+v:"")};n.enableDebug=function(){o.debug=true;o.priv.call("internal.showDebugWarning",{},null,null);o.priv.call("internal.hideDebugWarning",{},null,null)};setTimeout(function(){if(window.forge.debug){alert("Warning!\n\n'forge.debug = true;' is no longer supported\n\nUse 'forge.enableDebug();' instead.")}},3000);n.is={mobile:function(){return false},desktop:function(){return false},android:function(){return false},ios:function(){return false},chrome:function(){return false},firefox:function(){return false},safari:function(){return false},ie:function(){return false},web:function(){return false},orientation:{portrait:function(){return false},landscape:function(){return false}},connection:{connected:function(){return true},wifi:function(){return true}}};n.button={setIcon:function(u,v,t){o.priv.call("button.setIcon",u,v,t)},setURL:function(u,v,t){o.priv.call("button.setURL",u,v,t)},onClicked:{addListener:function(t){o.priv.call("button.onClicked.addListener",null,t)}},setBadge:function(u,v,t){o.priv.call("button.setBadge",u,v,t)},setBadgeBackgroundColor:function(u,v,t){o.priv.call("button.setBadgeBackgroundColor",u,v,t)},setTitle:function(v,u,t){o.priv.call("button.setTitle",v,u,t)}};n.message={listen:function(u,v,t){t&&t({message:"Forge Error: message.listen must be overridden by platform specific code",type:"UNAVAILABLE"})},broadcast:function(u,v,w,t){t&&t({message:"Forge Error: message.broadcast must be overridden by platform specific code",type:"UNAVAILABLE"})},broadcastBackground:function(u,v,w,t){t&&t({message:"Forge Error: message.broadcastBackground must be overridden by platform specific code",type:"UNAVAILABLE"})},toFocussed:function(u,v,w,t){o.priv.call("message.toFocussed",{type:u,content:v},w,t)}};n.notification={create:function(w,v,u,t){o.priv.call("notification.create",{title:w,text:v},u,t)}};n.request={get:function(u,v,t){n.request.ajax({url:u,dataType:"text",success:v&&function(){try{arguments[0]=JSON.parse(arguments[0])}catch(w){}v.apply(this,arguments)},error:t})},ajax:function(v){var t=v.dataType;if(t=="xml"){v.dataType="text"}var w=v.success&&function(A){try{if(t=="xml"){var z,y;if(window.DOMParser){z=new DOMParser();y=z.parseFromString(A,"text/xml")}else{y=new ActiveXObject("Microsoft.XMLDOM");y.async="false";y.loadXML(A)}A=y}}catch(B){}v.success&&v.success(A)};var u=v.error&&function(y){if(y.status=="error"&&!y.err){n.logging.log("AJAX request to "+v.url+" failed, have you included that url in the permissions section of the config file for this app?")}v.error&&v.error(y)};o.priv.call("request.ajax",v,w,u)}};n.tools={UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(w){var u=Math.random()*16|0;var t=w=="x"?u:(u&3|8);return t.toString(16)}).toUpperCase()},getURL:function(u,v,t){o.priv.call("tools.getURL",{name:u.toString()},v,t)}};var j=function(A,y,B){var v=[];stylize=function(D,C){return D};function t(C){return C instanceof RegExp||(typeof C==="object"&&Object.prototype.toString.call(C)==="[object RegExp]")}function u(C){return C instanceof Array||Array.isArray(C)||(C&&C!==Object.prototype&&u(C.__proto__))}function w(E){if(E instanceof Date){return true}if(typeof E!=="object"){return false}var C=Date.prototype&&Object.getOwnPropertyNames(Date.prototype);var D=E.__proto__&&Object.getOwnPropertyNames(E.__proto__);return JSON.stringify(D)===JSON.stringify(C)}function z(O,L){try{if(O&&typeof O.inspect==="function"&&!(O.constructor&&O.constructor.prototype===O)){return O.inspect(L)}switch(typeof O){case"undefined":return stylize("undefined","undefined");case"string":var C="'"+JSON.stringify(O).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(C,"string");case"number":return stylize(""+O,"number");case"boolean":return stylize(""+O,"boolean")}if(O===null){return stylize("null","null")}if(O instanceof Document){return(new XMLSerializer()).serializeToString(O)}var I=Object.keys(O);var P=y?Object.getOwnPropertyNames(O):I;if(typeof O==="function"&&P.length===0){var D=O.name?": "+O.name:"";return stylize("[Function"+D+"]","special")}if(t(O)&&P.length===0){return stylize(""+O,"regexp")}if(w(O)&&P.length===0){return stylize(O.toUTCString(),"date")}var E,M,J;if(u(O)){M="Array";J=["[","]"]}else{M="Object";J=["{","}"]}if(typeof O==="function"){var H=O.name?": "+O.name:"";E=" [Function"+H+"]"}else{E=""}if(t(O)){E=" "+O}if(w(O)){E=" "+O.toUTCString()}if(P.length===0){return J[0]+E+J[1]}if(L<0){if(t(O)){return stylize(""+O,"regexp")}else{return stylize("[Object]","special")}}v.push(O);var G=P.map(function(R){var Q,S;if(O.__lookupGetter__){if(O.__lookupGetter__(R)){if(O.__lookupSetter__(R)){S=stylize("[Getter/Setter]","special")}else{S=stylize("[Getter]","special")}}else{if(O.__lookupSetter__(R)){S=stylize("[Setter]","special")}}}if(I.indexOf(R)<0){Q="["+R+"]"}if(!S){if(v.indexOf(O[R])<0){if(L===null){S=z(O[R])}else{S=z(O[R],L-1)}if(S.indexOf("\n")>-1){if(u(O)){S=S.split("\n").map(function(T){return"  "+T}).join("\n").substr(2)}else{S="\n"+S.split("\n").map(function(T){return"   "+T}).join("\n")}}}else{S=stylize("[Circular]","special")}}if(typeof Q==="undefined"){if(M==="Array"&&R.match(/^\d+$/)){return S}Q=JSON.stringify(""+R);if(Q.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){Q=Q.substr(1,Q.length-2);Q=stylize(Q,"name")}else{Q=Q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");Q=stylize(Q,"string")}}return Q+": "+S});v.pop();var N=0;var F=G.reduce(function(Q,R){N++;if(R.indexOf("\n")>=0){N++}return Q+R.length+1},0);if(F>50){G=J[0]+(E===""?"":E+"\n ")+" "+G.join(",\n  ")+" "+J[1]}else{G=J[0]+E+" "+G.join(", ")+" "+J[1]}return G}catch(K){return"[No string representation]"}}return z(A,(typeof B==="undefined"?2:B))};var b=function(u,v){if("logging" in n.config){var t=n.config.logging.marker||"FORGE"}else{var t="FORGE"}u="["+t+"] "+(u.indexOf("\n")===-1?"":"\n")+u;o.priv.call("logging.log",{message:u,level:v});if(typeof console!=="undefined"){switch(v){case 10:if(console.debug!==undefined&&!(console.debug.toString&&console.debug.toString().match("alert"))){console.debug(u)}break;case 30:if(console.warn!==undefined&&!(console.warn.toString&&console.warn.toString().match("alert"))){console.warn(u)}break;case 40:case 50:if(console.error!==undefined&&!(console.error.toString&&console.error.toString().match("alert"))){console.error(u)}break;default:case 20:if(console.info!==undefined&&!(console.info.toString&&console.info.toString().match("alert"))){console.info(u)}break}}};var m=function(t,u){if(t in n.logging.LEVELS){return n.logging.LEVELS[t]}else{n.logging.__logMessage("Unknown configured logging level: "+t);return u}};var r=function(u){var y=function(z){if(z.message){return z.message}else{if(z.description){return z.description}else{return""+z}}};if(u){var w="\nError: "+y(u);try{if(u.lineNumber){w+=" on line number "+u.lineNumber}if(u.fileName){var t=u.fileName;w+=" in file "+t.substr(t.lastIndexOf("/")+1)}}catch(v){}if(u.stack){w+="\r\nStack trace:\r\n"+u.stack}return w}return""};n.logging={LEVELS:{ALL:0,DEBUG:10,INFO:20,WARNING:30,ERROR:40,CRITICAL:50},debug:function(u,t){n.logging.log(u,t,n.logging.LEVELS.DEBUG)},info:function(u,t){n.logging.log(u,t,n.logging.LEVELS.INFO)},warning:function(u,t){n.logging.log(u,t,n.logging.LEVELS.WARNING)},error:function(u,t){n.logging.log(u,t,n.logging.LEVELS.ERROR)},critical:function(u,t){n.logging.log(u,t,n.logging.LEVELS.CRITICAL)},log:function(u,t,y){if(typeof(y)==="undefined"){var y=n.logging.LEVELS.INFO}try{var v=m(n.config.logging.level,n.logging.LEVELS.ALL)}catch(w){var v=n.logging.LEVELS.ALL}if(y>=v){b(j(u,false,10)+r(t),y)}}};var l=function(y){if(y=="<all_urls>"){y="*://*"}y=y.split("://");var t=y[0];var v,w;if(y[1].indexOf("/")===-1){v=y[1];w=""}else{v=y[1].substring(0,y[1].indexOf("/"));w=y[1].substring(y[1].indexOf("/"))}var u="";if(t=="*"){u+=".*://"}else{u+=t+"://"}if(v=="*"){u+=".*"}else{if(v.indexOf("*.")===0){u+="(.+.)?"+v.substring(2)}else{u+=v}}u+=w.replace(/\*/g,".*");return"^"+u+"$"};n.tabs={open:function(u,v,w,t){if(typeof v==="function"){t=w;w=v;v=false}o.priv.call("tabs.open",{url:u,keepFocus:v},w,t)},openWithOptions:function(u,w,t){var v=undefined;if(u.pattern){u.pattern=l(u.pattern)}o.priv.call("tabs.open",u,w,t)},closeCurrent:function(t){t=arguments[1]||t;var u=n.tools.UUID();location.hash=u;o.priv.call("tabs.closeCurrent",{hash:u},null,t)}};n.prefs={get:function(u,v,t){o.priv.call("prefs.get",{key:u.toString()},v&&function(w){if(w==="undefined"){w=undefined}else{try{w=JSON.parse(w)}catch(y){t({message:y.toString()});return}}v(w)},t)},set:function(u,v,w,t){if(v===undefined){v="undefined"}else{v=JSON.stringify(v)}o.priv.call("prefs.set",{key:u.toString(),value:v},w,t)},keys:function(u,t){o.priv.call("prefs.keys",{},u,t)},all:function(u,t){var u=u&&function(v){for(key in v){if(v[key]==="undefined"){v[key]=undefined}else{v[key]=JSON.parse(v[key])}}u(v)};o.priv.call("prefs.all",{},u,t)},clear:function(u,v,t){o.priv.call("prefs.clear",{key:u.toString()},v,t)},clearAll:function(u,t){o.priv.call("prefs.clearAll",{},u,t)}};n.file={getImage:function(u,v,t){if(typeof u==="function"){t=v;v=u;u={}}if(!u){u={}}o.priv.call("file.getImage",u,v&&function(y){var w={uri:y,name:"Image",type:"image"};if(u.width){w.width=u.width}if(u.height){w.height=u.height}v(w)},t)},getVideo:function(u,v,t){if(typeof u==="function"){t=v;v=u;u={}}if(!u){u={}}o.priv.call("file.getVideo",u,v&&function(y){var w={uri:y,name:"Video",type:"video"};v(w)},t)},getLocal:function(u,v,t){n.tools.getURL(u,function(w){v({uri:w,name:u})},t)},base64:function(u,v,t){o.priv.call("file.base64",u,v,t)},string:function(u,v,t){n.request.ajax({url:u.uri,success:v,error:t})},URL:function(v,w,y,u){if(typeof w==="function"){u=y;y=w}var t={};for(prop in v){t[prop]=v[prop]}t.height=w.height||v.height||undefined;t.width=w.width||v.width||undefined;o.priv.call("file.URL",t,y,u)},isFile:function(u,v,t){if(!u||!("uri" in u)){v(false)}else{o.priv.call("file.isFile",u,v,t)}},cacheURL:function(u,v,t){o.priv.call("file.cacheURL",{url:u},v&&function(w){v({uri:w})},t)},remove:function(u,v,t){o.priv.call("file.remove",u,v,t)},clearCache:function(u,t){o.priv.call("file.clearCache",{},u,t)}};n.event={menuPressed:{addListener:function(u,t){o.addEventListener("menuPressed",u)}},messagePushed:{addListener:function(u,t){o.addEventListener("event.messagePushed",u)}},orientationChange:{addListener:function(u,t){o.addEventListener("event.orientationChange",u)}},connectionStateChange:{addListener:function(u,t){o.addEventListener("event.connectionStateChange",u)}}};n.contact={select:function(u,t){o.priv.call("contact.select",{},u,t)}};n.geolocation={getCurrentPosition:function(w,v,y){if(typeof(w)==="object"){var u=w,z=v,t=y}else{var z=w,t=v,u=y}return navigator.geolocation.getCurrentPosition(z,t,u)}};n.internal={ping:function(u,v,t){o.priv.call("internal.ping",{data:[u]},v,t)}};n.sms={send:function(w,v,t){if(w.to&&typeof w.to=="string"){w.to=[w.to]}var u={body:w.body||"",to:w.to||[]};o.priv.call("sms.send",u,v,t)}};n.topbar={show:function(u,t){o.priv.call("topbar.show",{},u,t)},hide:function(u,t){o.priv.call("topbar.hide",{},u,t)},setTitle:function(v,u,t){o.priv.call("topbar.setTitle",{title:v},u,t)},setTitleImage:function(u,v,t){if(u&&u[0]==="/"){u=u.substr(1)}o.priv.call("topbar.setTitleImage",{icon:u},v,t)},setTint:function(t,v,u){o.priv.call("topbar.setTint",{color:t},v,u)},addButton:function(u,v,t){if(u.icon&&u.icon[0]==="/"){u.icon=u.icon.substr(1)}o.priv.call("topbar.addButton",u,function(w){v&&o.addEventListener("topbar.buttonPressed."+w,v)},t)},removeButtons:function(u,t){o.priv.call("topbar.removeButtons",{},u,t)},homePressed:{addListener:function(u,t){o.addEventListener("topbar.homePressed",u)}}};n.tabbar={show:function(u,t){o.priv.call("tabbar.show",{},u,t)},hide:function(u,t){o.priv.call("tabbar.hide",{},u,t)},addButton:function(v,u,t){if(v.icon&&v.icon[0]==="/"){v.icon=v.icon.substr(1)}o.priv.call("tabbar.addButton",v,function(w){u&&u({remove:function(z,y){o.priv.call("tabbar.removeButton",{id:w},z,y)},setActive:function(z,y){o.priv.call("tabbar.setActive",{id:w},z,y)},onPressed:{addListener:function(z,y){o.addEventListener("tabbar.buttonPressed."+w,z)}}})},t)},removeButtons:function(u,t){o.priv.call("tabbar.removeButtons",{},u,t)},setTint:function(t,v,u){o.priv.call("tabbar.setTint",{color:t},v,u)},setActiveTint:function(t,v,u){o.priv.call("tabbar.setActiveTint",{color:t},v,u)},setInactive:function(u,t){o.priv.call("tabbar.setInactive",{},u,t)}};n.media={videoPlay:function(u,v,t){if(!u.uri){u={uri:u}}o.priv.call("media.videoPlay",u,v,t)}};n.payments={purchaseProduct:function(u,v,t){o.priv.call("payments.purchaseProduct",{product:u},v,t)},restoreTransactions:function(u,t){o.priv.call("payments.restoreTransactions",{},u,t)},transactionReceived:{addListener:function(u,t){o.addEventListener("payments.transactionReceived",function(w){var v=function(){if(w.notificationId){o.priv.call("payments.confirmNotification",{id:w.notificationId})}};u(w,v)})}}};var p=[];var g=false;o.priv.get=function(){var t=JSON.stringify(p);p=[];return t};var f=[],k="zero-timeout-message";function d(t){f.push(t);window.postMessage(k,"*")}function c(t){setTimeout(t,0)}function e(t){if(t.source==window&&t.data==k){if(t.stopPropagation){t.stopPropagation()}if(f.length){f.shift()()}}}if(window.postMessage){if(window.addEventListener){window.addEventListener("message",e,true)}else{if(window.attachEvent){window.attachEvent("onmessage",e)}}window.setZeroTimeout=d}else{window.setZeroTimeout=c}o.priv.send=function(t){p.push(t);if(g&&!window.forge._flushing){window.forge._flushing=true;c(function(){window.location.href="forge://go"})}};document.addEventListener("DOMContentLoaded",function(){g=true;window.forge._flushing=true;c(function(){window.location.href="forge://go"})},false);o.currentOrientation;o.addEventListener("internal.orientationChange",function(t){if(o.currentOrientation!=t.orientation){o.currentOrientation=t.orientation;o.priv.receive({event:"event.orientationChange"})}});o.currentConnectionState={connected:false,wifi:false};o.addEventListener("internal.connectionStateChange",function(t){if(t.connected!=o.currentConnectionState.connected||t.wifi!=o.currentConnectionState.wifi){o.currentConnectionState=t;o.priv.receive({event:"event.connectionStateChange"})}});n.is.mobile=function(){return true};n.is.ios=function(){return true};n.is.orientation.portrait=function(){return o.currentOrientation=="portrait"};n.is.orientation.landscape=function(){return o.currentOrientation=="landscape"};n.is.connection.connected=function(){return o.currentConnectionState.connected};n.is.connection.wifi=function(){return o.currentConnectionState.wifi};n.request.ajax=function(v){var A=(v.files?v.files:null);var J=(v.fileUploadMethod?v.fileUploadMethod:"multipart");var z=(v.url?v.url:null);var B=(v.success?v.success:undefined);var I=(v.error?v.error:undefined);var y=(v.username?v.username:null);var t=(v.password?v.password:null);var N=(v.accepts?v.accepts:["*/*"]);var F=(v.cache?v.cache:false);var L=(v.contentType?v.contentType:null);var O=(v.data?v.data:null);var H=(v.dataType?v.dataType:null);var u=(v.headers?v.headers:{});var C=(v.timeout?v.timeout:60000);var w=(v.type?v.type:"GET");if(typeof N==="string"){N=[N]}var K=null;if(A){w="POST";if(J=="multipart"){K=n.tools.UUID().replace(/-/g,"");O=o.generateMultipartString(O,K);L="multipart/form-data; boundary="+K}else{if(J=="raw"){if(A.length>1){n.logging.warning("Only one file can be uploaded at once with type 'raw'");A=[A[0]]}O=null;L="image/jpg"}}}else{if(w=="GET"){z=o.generateURI(z,O);O=null}else{if(O){O=o.generateQueryString(O);if(!L){L="application/x-www-form-urlencoded"}}}}if(F){F={};F["wm"+Math.random()]=Math.random();z=o.generateURI(z,F)}if(N){u.Accept=N.join(",")}if(L){u["Content-Type"]=L}var G={};if(window._forgeDebug){try{G.id=n.tools.UUID();G.fromUrl=window.location.href;G.reqTime=(new Date()).getTime()/1000;G.method=w;G.data=O;G.url=z;_forgeDebug.wi.NetworkNotify.identifierForInitialRequest(G.id,G.url,{url:G.fromUrl,frameId:0,loaderId:0},[]);_forgeDebug.wi.NetworkNotify.willSendRequest(G.id,G.reqTime,{url:G.url,httpMethod:G.method,httpHeaderFields:{},requestFormData:G.data},{isNull:true})}catch(M){}}var E=false;var D=setTimeout(function(){if(E){return}E=true;if(window._forgeDebug){try{G.respTime=(new Date()).getTime()/1000;G.respText=O;_forgeDebug.wi.NetworkNotify.didReceiveResponse(G.id,G.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(G.id,G.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(G.id,G.respTime)}catch(P){}}I&&I({message:"Request timed out",type:"EXPECTED_FAILURE"})},C);o.priv.call("request.ajax",{url:z,username:y,password:t,data:O,headers:u,timeout:C,type:w,boundary:K,files:A,fileUploadMethod:J},function(R){clearTimeout(D);if(E){return}E=true;if(window._forgeDebug){try{G.respTime=(new Date()).getTime()/1000;G.respText=R;_forgeDebug.wi.NetworkNotify.didReceiveResponse(G.id,G.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Success",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(G.id,G.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(G.id,G.respTime)}catch(S){}}try{if(H=="xml"){var Q,P;if(window.DOMParser){Q=new DOMParser();P=Q.parseFromString(R,"text/xml")}else{P=new ActiveXObject("Microsoft.XMLDOM");P.async="false";P.loadXML(R)}R=P}else{if(H=="json"){R=JSON.parse(R)}}}catch(S){}B&&B(R)},function(){clearTimeout(D);if(E){return}E=true;if(window._forgeDebug){try{G.respTime=(new Date()).getTime()/1000;G.respText=O;_forgeDebug.wi.NetworkNotify.didReceiveResponse(G.id,G.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false,});_forgeDebug.wi.NetworkNotify.setInitialContent(G.id,G.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(G.id,G.respTime)}catch(P){}}I&&I.apply(this,arguments)})};n.geolocation={getCurrentPosition:function(w,v,y){if(typeof(w)==="object"){var u=w,z=v,t=y}else{var z=w,t=v,u=y}o.priv.call("geolocation.getCurrentPosition",u,z,t)}};n.file.getLocal=function(u,v,t){o.priv.call("file.getLocal",{name:u},v,t)};n.file.string=function(u,v,t){o.priv.call("file.string",u,v,t)};window.forge={config:n.config,enableDebug:n.enableDebug,is:{mobile:n.is.mobile,desktop:n.is.desktop,android:n.is.android,ios:n.is.ios,chrome:n.is.chrome,firefox:n.is.firefox,safari:n.is.safari,ie:n.is.ie,web:n.is.web,orientation:{portrait:n.is.orientation.portrait,landscape:n.is.orientation.landscape},connection:{connected:n.is.connection.connected,wifi:n.is.connection.wifi}},message:{listen:n.message.listen,broadcast:n.message.broadcast,broadcastBackground:n.message.broadcastBackground,toFocussed:n.message.toFocussed},notification:{create:n.notification.create},request:{get:n.request.get,ajax:n.request.ajax},logging:{log:n.logging.log,debug:n.logging.debug,info:n.logging.info,warning:n.logging.warning,error:n.logging.error,critical:n.logging.critical},tabs:{open:n.tabs.open,openWithOptions:n.tabs.openWithOptions,closeCurrent:n.tabs.closeCurrent},tools:{UUID:n.tools.UUID,getURL:n.tools.getURL},prefs:{get:n.prefs.get,set:n.prefs.set,clear:n.prefs.clear,clearAll:n.prefs.clearAll,keys:n.prefs.keys},button:{setIcon:n.button.setIcon,setURL:n.button.setURL,onClicked:{addListener:n.button.onClicked.addListener},setBadge:n.button.setBadge,setBadgeBackgroundColor:n.button.setBadgeBackgroundColor,setTitle:n.button.setTitle},file:{getImage:n.file.getImage,getVideo:n.file.getVideo,getLocal:n.file.getLocal,isFile:n.file.isFile,URL:n.file.URL,base64:n.file.base64,string:n.file.string,cacheURL:n.file.cacheURL,remove:n.file.remove,clearCache:n.file.clearCache},media:{videoPlay:n.media.videoPlay},event:{menuPressed:{addListener:n.event.menuPressed.addListener},messagePushed:{addListener:n.event.messagePushed.addListener},orientationChange:{addListener:n.event.orientationChange.addListener},connectionStateChange:{addListener:n.event.connectionStateChange.addListener}},contact:{select:n.contact.select},geolocation:{getCurrentPosition:n.geolocation.getCurrentPosition},internal:{ping:n.internal.ping},sms:{send:n.sms.send},topbar:{show:n.topbar.show,hide:n.topbar.hide,setTitle:n.topbar.setTitle,setTitleImage:n.topbar.setTitleImage,setTint:n.topbar.setTint,addButton:n.topbar.addButton,removeButtons:n.topbar.removeButtons,homePressed:{addListener:n.topbar.homePressed.addListener}},tabbar:{show:n.tabbar.show,hide:n.tabbar.hide,addButton:n.tabbar.addButton,removeButtons:n.tabbar.removeButtons,setTint:n.tabbar.setTint,setActiveTint:n.tabbar.setActiveTint,setInactive:n.tabbar.setInactive},payments:{purchaseProduct:n.payments.purchaseProduct,restoreTransactions:n.payments.restoreTransactions,transactionReceived:{addListener:n.payments.transactionReceived.addListener}},media:{videoPlay:n.media.videoPlay}};window.forge["ajax"]=n.request.ajax;window.forge["getPage"]=n.request.get;window.forge["createNotification"]=n.notification.create;window.forge["UUID"]=n.tools.UUID;window.forge["getURL"]=n.tools.getURL;window.forge["log"]=n.logging.log;window.forge["button"]["setUrl"]=n.button.setURL;window.forge["button"]["setBadgeText"]=n.button.setBadge;window.forge["file"]["delete"]=n.file.remove;window.forge["file"]["imageURL"]=n.file.URL;window.forge["_get"]=o.priv.get;window.forge["_receive"]=o.priv.receive;window.forge["_dispatchMessage"]=o.dispatchMessage})();